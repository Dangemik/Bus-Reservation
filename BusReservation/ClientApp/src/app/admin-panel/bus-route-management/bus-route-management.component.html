<h2 mat-dialog-title>Zarządzenie Połączeniami Autobusowymi</h2>
<div class="dialog-management">
  <mat-form-field style="width: 30%">
    <input
      matInput
      type="text"
      (keyup)="doFilter($event.target.value)"
      placeholder="Wyszukiwarka"
      autocomplete="off"
    />
  </mat-form-field>
  <div>
    <button
      mat-raised-button
      color="primary"
      (click)="openAddBusRouteDialog()"
      class="add-button"
      matTooltip="Dodaj autobus"
    >
      Dodaj <mat-icon>add_circle</mat-icon>
    </button>
  </div>
</div>

<table mat-table [dataSource]="dataSource" matSort>
  <ng-container matColumnDef="busRouteId">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Id połączenia</th>
    <td mat-cell *matCellDef="let element">{{ element.busRouteId }}</td>
  </ng-container>
  <ng-container matColumnDef="fromStation">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Z przystanku</th>
    <td mat-cell *matCellDef="let element">{{ element.fromStation }}</td>
  </ng-container>
  <ng-container matColumnDef="toStation">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Do przystanku</th>
    <td mat-cell *matCellDef="let element">{{ element.toStation }}</td>
  </ng-container>
  <ng-container matColumnDef="numberKm">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Liczba Kilometrów</th>
    <td mat-cell *matCellDef="let element">{{ element.numberKm }}</td>
  </ng-container>
  <ng-container matColumnDef="price">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Cena</th>
    <td mat-cell *matCellDef="let element">{{ element.price }}</td>
  </ng-container>
  <ng-container matColumnDef="throughStations">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Przez przystanki</th>
    <td mat-cell *matCellDef="let element">{{ element.throughStations }}</td>
  </ng-container>
  <ng-container matColumnDef="hour">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Godzina</th>
    <td mat-cell *matCellDef="let element">{{ element.hour }}</td>
  </ng-container>
  <ng-container matColumnDef="minute">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Minuta</th>
    <td mat-cell *matCellDef="let element">{{ element.minute }}</td>
  </ng-container>
  <ng-container matColumnDef="creationDate">
    <th mat-header-cell *matHeaderCellDef mat-sort-header>Data utworzenia</th>
    <td mat-cell *matCellDef="let element">{{element.creationDate | date: 'dd-MM-yyyy H:mm'}} </td>
  </ng-container>


  <!-- Action -->
  <ng-container matColumnDef="driverDetails">
    <th mat-header-cell *matHeaderCellDef>Kierowca</th>
    <td mat-cell *matCellDef="let element">
      <button
        mat-icon-button
        color="primary"
        (click)="openDriverDetailsDialog(element.user)"
        matTooltip="Kierowca"
      >
        <mat-icon>person</mat-icon>
      </button>
    </td>
  </ng-container>

  <ng-container matColumnDef="details">
    <th mat-header-cell *matHeaderCellDef>Autobus</th>
    <td mat-cell *matCellDef="let element">
      <button
        mat-icon-button
        color="primary"
        (click)="openDetailsBusDialog(element.bus)"
        matTooltip="Autobus"
      >
        <mat-icon>directions_bus</mat-icon>
      </button>
    </td>
  </ng-container>

  <ng-container matColumnDef="update">
    <th mat-header-cell *matHeaderCellDef>Edytuj</th>
    <td mat-cell *matCellDef="let element">
      <button
        mat-icon-button
        color="accent"
        (click)="openEditBusRouteDialog(element)"
        matTooltip="Edytuj autobus"
      >
        <mat-icon>edit</mat-icon>
      </button>
    </td>
  </ng-container>
  <ng-container matColumnDef="delete">
    <th mat-header-cell *matHeaderCellDef>Usuń</th>
    <td mat-cell *matCellDef="let element">
      <button
        mat-icon-button
        color="warn"
        (click)="deleteBusRoute(element.busRouteId)"
        matTooltip="Usuń autobus"
      >
        <mat-icon>delete</mat-icon>
      </button>
    </td>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>
<mat-paginator [pageSizeOptions]="[5, 10]" showFirstLastButtons></mat-paginator>
